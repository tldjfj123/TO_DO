(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();let i,m=null;function h(){return(m===null||m.byteLength===0)&&(m=new Uint8Array(i.memory.buffer)),m}let S=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});S.decode();const M=2146435072;let x=0;function N(e,t){return x+=t,x>=M&&(S=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),S.decode(),x=t),S.decode(h().subarray(e,e+t))}function O(e,t){return e=e>>>0,N(e,t)}let w=0;const E=new TextEncoder;"encodeInto"in E||(E.encodeInto=function(e,t){const n=E.encode(e);return t.set(n),{read:e.length,written:n.length}});function A(e,t,n){if(n===void 0){const u=E.encode(e),y=t(u.length,1)>>>0;return h().subarray(y,y+u.length).set(u),w=u.length,y}let r=e.length,o=t(r,1)>>>0;const s=h();let c=0;for(;c<r;c++){const u=e.charCodeAt(c);if(u>127)break;s[o+c]=u}if(c!==r){c!==0&&(e=e.slice(c)),o=n(o,r,r=c+e.length*3,1)>>>0;const u=h().subarray(o+c,o+r),y=E.encodeInto(e,u);c+=y.written,o=n(o,r,c,1)>>>0}return w=c,o}let b=null;function _(){return(b===null||b.buffer.detached===!0||b.buffer.detached===void 0&&b.buffer!==i.memory.buffer)&&(b=new DataView(i.memory.buffer)),b}function d(e){return e==null}function L(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const o=e.description;return o==null?"Symbol":`Symbol(${o})`}if(t=="function"){const o=e.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(e)){const o=e.length;let s="[";o>0&&(s+=L(e[0]));for(let c=1;c<o;c++)s+=", "+L(e[c]);return s+="]",s}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(n&&n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function D(e){const t=i.__externref_table_alloc();return i.__wbindgen_externrefs.set(t,e),t}function F(e,t){try{return e.apply(this,t)}catch(n){const r=D(n);i.__wbindgen_exn_store(r)}}function W(e,t){return e=e>>>0,h().subarray(e/1,e/1+t)}function g(e){const t=i.__wbindgen_externrefs.get(e);return i.__externref_table_dealloc(e),t}const T=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>i.__wbg_todolist_free(e>>>0,1));class f{static __wrap(t){t=t>>>0;const n=Object.create(f.prototype);return n.__wbg_ptr=t,T.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),t}free(){const t=this.__destroy_into_raw();i.__wbg_todolist_free(t,0)}add(t){const n=A(t,i.__wbindgen_malloc,i.__wbindgen_realloc),r=w,o=i.todolist_add(this.__wbg_ptr,n,r);if(o[2])throw g(o[1]);return g(o[0])}constructor(){const t=i.todolist_new();return this.__wbg_ptr=t>>>0,T.register(this,this.__wbg_ptr,this),this}items(){const t=i.todolist_items(this.__wbg_ptr);if(t[2])throw g(t[1]);return g(t[0])}remove(t){return i.todolist_remove(this.__wbg_ptr,t)!==0}toggle(t){return i.todolist_toggle(this.__wbg_ptr,t)!==0}hydrate(t){const n=i.todolist_hydrate(this.__wbg_ptr,t);if(n[1])throw g(n[0])}static fromJson(t){const n=i.todolist_fromJson(t);if(n[2])throw g(n[1]);return f.__wrap(n[0])}}Symbol.dispose&&(f.prototype[Symbol.dispose]=f.prototype.free);const $=new Set(["basic","cors","default"]);async function U(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.ok&&$.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function C(){const e={};return e.wbg={},e.wbg.__wbg_Error_e83987f665cf5504=function(t,n){return Error(O(t,n))},e.wbg.__wbg_Number_bb48ca12f395cd08=function(t){return Number(t)},e.wbg.__wbg_String_8f0eb39a4a4c2f66=function(t,n){const r=String(n),o=A(r,i.__wbindgen_malloc,i.__wbindgen_realloc),s=w;_().setInt32(t+4,s,!0),_().setInt32(t+0,o,!0)},e.wbg.__wbg___wbindgen_bigint_get_as_i64_f3ebc5a755000afd=function(t,n){const r=n,o=typeof r=="bigint"?r:void 0;_().setBigInt64(t+8,d(o)?BigInt(0):o,!0),_().setInt32(t+0,!d(o),!0)},e.wbg.__wbg___wbindgen_boolean_get_6d5a1ee65bab5f68=function(t){const n=t,r=typeof n=="boolean"?n:void 0;return d(r)?16777215:r?1:0},e.wbg.__wbg___wbindgen_debug_string_df47ffb5e35e6763=function(t,n){const r=L(n),o=A(r,i.__wbindgen_malloc,i.__wbindgen_realloc),s=w;_().setInt32(t+4,s,!0),_().setInt32(t+0,o,!0)},e.wbg.__wbg___wbindgen_in_bb933bd9e1b3bc0f=function(t,n){return t in n},e.wbg.__wbg___wbindgen_is_bigint_cb320707dcd35f0b=function(t){return typeof t=="bigint"},e.wbg.__wbg___wbindgen_is_function_ee8a6c5833c90377=function(t){return typeof t=="function"},e.wbg.__wbg___wbindgen_is_null_5e69f72e906cc57c=function(t){return t===null},e.wbg.__wbg___wbindgen_is_object_c818261d21f283a4=function(t){const n=t;return typeof n=="object"&&n!==null},e.wbg.__wbg___wbindgen_is_undefined_2d472862bd29a478=function(t){return t===void 0},e.wbg.__wbg___wbindgen_jsval_eq_6b13ab83478b1c50=function(t,n){return t===n},e.wbg.__wbg___wbindgen_jsval_loose_eq_b664b38a2f582147=function(t,n){return t==n},e.wbg.__wbg___wbindgen_number_get_a20bf9b85341449d=function(t,n){const r=n,o=typeof r=="number"?r:void 0;_().setFloat64(t+8,d(o)?0:o,!0),_().setInt32(t+0,!d(o),!0)},e.wbg.__wbg___wbindgen_string_get_e4f06c90489ad01b=function(t,n){const r=n,o=typeof r=="string"?r:void 0;var s=d(o)?0:A(o,i.__wbindgen_malloc,i.__wbindgen_realloc),c=w;_().setInt32(t+4,c,!0),_().setInt32(t+0,s,!0)},e.wbg.__wbg___wbindgen_throw_b855445ff6a94295=function(t,n){throw new Error(O(t,n))},e.wbg.__wbg_call_e762c39fa8ea36bf=function(){return F(function(t,n){return t.call(n)},arguments)},e.wbg.__wbg_done_2042aa2670fb1db1=function(t){return t.done},e.wbg.__wbg_get_7bed016f185add81=function(t,n){return t[n>>>0]},e.wbg.__wbg_get_efcb449f58ec27c2=function(){return F(function(t,n){return Reflect.get(t,n)},arguments)},e.wbg.__wbg_get_with_ref_key_1dc361bd10053bfe=function(t,n){return t[n]},e.wbg.__wbg_instanceof_ArrayBuffer_70beb1189ca63b38=function(t){let n;try{n=t instanceof ArrayBuffer}catch{n=!1}return n},e.wbg.__wbg_instanceof_Uint8Array_20c8e73002f7af98=function(t){let n;try{n=t instanceof Uint8Array}catch{n=!1}return n},e.wbg.__wbg_isArray_96e0af9891d0945d=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_d216eda7911dde36=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_e5822695327a3c39=function(){return Symbol.iterator},e.wbg.__wbg_length_69bca3cb64fc8748=function(t){return t.length},e.wbg.__wbg_length_cdd215e10d9dd507=function(t){return t.length},e.wbg.__wbg_new_1acc0b6eea89d040=function(){return new Object},e.wbg.__wbg_new_5a79be3ab53b8aa5=function(t){return new Uint8Array(t)},e.wbg.__wbg_new_e17d9f43105b08be=function(){return new Array},e.wbg.__wbg_next_020810e0ae8ebcb0=function(){return F(function(t){return t.next()},arguments)},e.wbg.__wbg_next_2c826fe5dfec6b6a=function(t){return t.next},e.wbg.__wbg_now_793306c526e2e3b6=function(){return Date.now()},e.wbg.__wbg_prototypesetcall_2a6620b6922694b2=function(t,n,r){Uint8Array.prototype.set.call(W(t,n),r)},e.wbg.__wbg_set_3f1d0b984ed272ed=function(t,n,r){t[n]=r},e.wbg.__wbg_set_c213c871859d6500=function(t,n,r){t[n>>>0]=r},e.wbg.__wbg_value_692627309814bb8c=function(t){return t.value},e.wbg.__wbindgen_cast_2241b6af4c4b2941=function(t,n){return O(t,n)},e.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(t){return t},e.wbg.__wbindgen_init_externref_table=function(){const t=i.__wbindgen_externrefs,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function P(e,t){return i=e.exports,j.__wbindgen_wasm_module=t,b=null,m=null,i.__wbindgen_start(),i}async function j(e){if(i!==void 0)return i;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/TO_DO/assets/todo_wasm_bg-BZxoWNb7.wasm",import.meta.url));const t=C();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await U(await e,t);return P(n,r)}const q=Object.freeze(["all","active","done"]),k=(e=[],t="all")=>{if(!Array.isArray(e))return[];switch(t){case"active":return e.filter(n=>!n.completed);case"done":return e.filter(n=>n.completed);case"all":default:return e.slice()}},B=(e=[])=>Array.isArray(e)?e.reduce((t,n)=>t+(n.completed?0:1),0):0,R="todo-wasm-items",z=document.querySelector("#app");z.innerHTML=`
  <main class="todo-app">
    <header>
      <p class="badge">✨ 낯선 도구 해커톤</p>
      <h1>Rust + WASM To-Do</h1>
      <p class="muted" id="summary">오늘의 할 일 (0)</p>
    </header>

    <form id="todo-form" autocomplete="off">
      <input
        id="todo-input"
        type="text"
        placeholder="해야 할 일을 입력하고 Enter 를 누르세요"
      />
      <button type="submit">추가</button>
    </form>
    <p class="error" id="todo-error" role="alert"></p>

    <section class="toolbar">
      <div class="filters" id="filters">
        <button type="button" data-filter="all" class="active">전체</button>
        <button type="button" data-filter="active">진행중</button>
        <button type="button" data-filter="done">완료</button>
      </div>
      <span id="counter">0개 남음</span>
    </section>

    <ul id="todo-list" class="todo-list"></ul>
  </main>
`;const a={form:document.getElementById("todo-form"),input:document.getElementById("todo-input"),list:document.getElementById("todo-list"),counter:document.getElementById("counter"),summary:document.getElementById("summary"),error:document.getElementById("todo-error"),filters:document.getElementById("filters")};let l=null,v="all";const J=e=>`오늘의 할 일 (${B(e)})`,V=e=>{try{localStorage.setItem(R,JSON.stringify(e))}catch(t){console.warn("로컬 저장에 실패했습니다.",t)}},H=()=>{try{const e=localStorage.getItem(R);return e?JSON.parse(e):null}catch(e){return console.warn("저장된 데이터를 읽을 수 없습니다.",e),null}},p=(e="")=>{a.error.textContent=e,a.error.hidden=!e},Y=()=>{a.list.innerHTML=`
    <li class="empty">
      <span>아직 할 일이 없습니다. 첫 할 일을 추가해 보세요!</span>
    </li>
  `},I=()=>{const e=l.items(),t=k(e,v);t.length===0?Y():a.list.innerHTML=t.map(n=>`
        <li class="todo-item ${n.completed?"completed":""}" data-id="${n.id}">
          <button class="toggle" data-action="toggle" aria-label="완료 토글">
            <span>${n.completed?"✓":""}</span>
          </button>
          <span class="title">${n.title}</span>
          <button class="delete" data-action="delete" aria-label="삭제">×</button>
        </li>
      `).join(""),a.counter.textContent=`${B(e)}개 남음`,a.summary.textContent=J(e),V(e)},K=e=>{e.preventDefault();const t=a.input.value;try{l.add(t),a.input.value="",p(""),I()}catch(n){if(typeof n=="string"){p(n);return}n&&typeof n.message=="string"?p(n.message):p("알 수 없는 오류가 발생했습니다.")}},X=e=>{const t=e.target.closest("button[data-action]");if(!t)return;const n=t.closest(".todo-item");if(!n)return;const r=Number(n.dataset.id);t.dataset.action==="toggle"?l.toggle(r):t.dataset.action==="delete"&&l.remove(r),I()},G=e=>{const t=e.target.closest("button[data-filter]");t&&(v=t.dataset.filter,q.forEach(n=>{a.filters.querySelector(`[data-filter="${n}"]`).classList.toggle("active",n===v)}),I())},Z=async()=>{await j();const e=H();if(e)try{l=f.fromJson(e)}catch(t){console.warn("저장된 데이터를 복원할 수 없습니다.",t),l=new f}else l=new f;a.form.addEventListener("submit",K),a.list.addEventListener("click",X),a.filters.addEventListener("click",G),p(""),I()};Z();
